define("output/paper/0.0.1/paper",[],function(){function j(){this.initConfig.apply(this,arguments);var a={id:5,title:" ",c_time:"",creator:"",cid:1,cname:"",groups:"",store:[],scoreMap:[],stuMap:[]};this.get=function(b){return a[b]||null},this.set=function(b,c){a[b]=c}}function n(a){var b=new j(a);return b}function o(){$(".score").click(function(){var a=this,b=$(a).text().replace(i,""),c=art.dialog({title:"修改标题",lock:!0,background:"#600",opacity:.87,content:"<input type='text' value='"+b+"' />",ok:function(){var b=$(c.content()).find("input").val();return b=b.replace(i,""),b=parseInt(b),0/0==b?(alert("非法数值"),!1):($(a).text("("+b+"分)"),this.close(),!1)},cancel:!0})})}function p(){$(".op-del").click(function(){var b=$(this).parents(".topic-item").find(".label").attr("data-id");$.ajax({type:"get",url:"paper/iutem/delete",dataType:"json",data:{id:b},success:function(a){return a.success?($(this).parents(".topic-item").remove(),void 0):(alert(a.msg),void 0)},error:function(a,b){alert(b)}})})}function q(){$(".gp-title span,.gp-desc span").click(function(){var a=this,b=$(a).text(),c=art.dialog({title:"修改标题",lock:!0,background:"#600",opacity:.87,content:'<textarea style="width:400px;height:200px;resize:vertical">'+b+"</textarea>",ok:function(){var b=$(c.content()).find("textarea").val();return b.length>200?(alert("文本过长，请删减"),!1):($(a).text(b),this.close(),!1)},cancel:!0})})}function r(){p(),o(),q()}var d=1e3,e='<%each store as group index%><div class="gp-topic"><h2 class=\'gp-title\'><%index+1%>、<span><%group.title%></span></h2><h4 class="gp-desc"><span><%group.desc%></span></h4><%if group.questions.length  %><%each group.questions as item qIndex%><%if item.type == 1%><div class="topic-item"><div class="label" data-id="<%item.id%>" data-type="<%item.type%>"><%qIndex+1%>.</div><span class="score">(<%group.scoreMap[item.id]%>分)</span><div class="content"><div class="stem"><%echo item.stem.title%></div><ul class="options"><%each item.stem.option as opt oIndex%><li class="opt-item"><div class="opt-label"><span><%$labelMaker(oIndex+65)%>.</span><input value="<%$labelMaker(oIndex+65)%>" type="radio" name="<%qIndex%>"/></div><div class="opt-field"><%opt%></div></li><%/each%>						 		 </ul><div class="answer"><span>答案：<%item.answer%></span><span> </span></div></div><div class="item-op">					<span class="op-del"> 删除 </span><span class="op-mod"> 修改 </span>							</div></div><%else if item.type==2%><div class="topic-item"><div class="label" data-id="<%item.id%>" data-type="<%item.type%>"><%qIndex+1%>.</div><span class="score">(<%group.scoreMap[item.id]%>分)</span><div class="content"><div class="stem"><%echo item.stem.title%></div><ul class="options"><%each item.stem.option as opt oIndex%><li class="opt-item"><div class="opt-label"><span><%$labelMaker(oIndex+65)%>.</span><input value="<%$labelMaker(oIndex+65)%>" type="checkbox" name="<%qIndex%>"/></div><div class="opt-field"><%opt%></div></li><%/each%>						 		 </ul><div class="answer"><span>答案：<%item.answer%></span><span> </span></div></div><div class="item-op">					<span class="op-del"> 删除 </span><span class="op-mod"> 修改 </span>									</div></div><%else if item.type==3%><div class="topic-item"><div class="label" data-id="<%item.id%>" data-type="<%item.type%>"><%qIndex+1%>.</div><span class="score">(<%group.scoreMap[item.id]%>分)</span><div class="content"><div class="stem"><%echo item.stem.title%></div>							<div class="answer"><span>答案：</span><span class="blank-aswlist"><%each item.answer as basw%><strong  class="asw-tag"><%basw%></strong>								<%/each%></span></div></div><div class="item-op">					<span class="op-del"> 删除 </span><span class="op-mod"> 修改 </span>							</div></div><%else if item.type==4%><div class="topic-item"><div class="label" data-id="<%item.id%>" data-id="<%item.type%>"><%qIndex+1%>.</div><span class="score">(<%group.scoreMap[item.id]%>分)</span><div class="content"><div class="stem"><%echo item.stem.title%></div>			 			<ul class="options opts-judge"><li class="opt-item opt-judge"><input type="radio" name="<%qIndex%>"/><span>正确</span></li><li class="opt-item opt-judge"><input type="radio" name="<%qIndex%>"/><span>错误</span>							</li>	 	</ul><div class="answer"><span>答案：</span><span><%item.answer%></span></div></div>			<div class="item-op">					<span class="op-del"> 删除 </span><span class="op-mod"> 修改 </span>						</div></div><%else if item.type==5%><div class="topic-item"><div class="label" data-id="<%item.id%>" data-id="<%item.type%>"><%qIndex+1%>.</div><span class="score">(<%group.scoreMap[item.id]%>分)</span><div class="content"><div class="stem"><%echo item.stem.title%></div><div class="tablet"><textarea name="" id="" cols="30" rows="10"></textarea><label class="tip-statistics">0/<%$subjectLimit%></label></div><div class="answer"><span>答案：</span><div><%item.answer%></div></div></div><div class="item-op">					<span class="op-del"> 删除 </span><span class="op-mod"> 修改 </span>								</div></div><%else%>未知类型<%/if%><%/each%><%/if%></div><%/each%>',i=/[^\d]/g,k=function(a){return String.fromCharCode(a)},l=function(a){return JSON.stringify(a)},m=function(a){if("object"==typeof a){for(var b in a)return!0;return!1}return!1};return j.fn=j.prototype,j.fn.loadData=function(a){var b=this;if(a)$.ajax({type:"get",url:b.options.url,dataType:"json",data:{},success:function(a){if(!a.success)return alert(a.msg),void 0;var d=a.data;for(var e in d)b.set(e,d[e]);b.set("store",d.groups),b.renderCombine(d.groups)},error:function(a,b){alert(b)}});else{var c=b.options.localPaper.serializeByType();console.log(c),b.renderCombine(c)}},j.fn.initConfig=function(a){template.helper("$labelMaker",k),template.helper("$JSONStringify",l),template.helper("$subjectLimit",function(){return d}),this.options=$.extend({url:""},a||{}),this.$el=$(this.options.ele),this.$el.empty(),this.loadData(this.options.remote)},j.fn.isExisted=function(){for(var b=this.get("store"),c=0;b.length>c;c++);},j.fn.renderCombine=function(a){var b=template.compile(e),c=b({store:a});this.$el.append(c),r()},j.fn.deleteItem=function(a){for(var b=this.get("store"),c=0;b.length>c;c++)for(var d=b[c],e=d.questions,f=0;e.length>f;f++)if(a==e[f].id)return e.splice(f,1),!0;return!1},j.fn.serialize=function(){var a=[];return $(".gp-topic").each(function(b,c){var d=$(c).find(".gp-title span").text(),e=$(c).find(".gp-desc span").text(),f={scoreMap:{},title:d,desc:e};$(c).find(".topic-item").each(function(a,b){var c=$(b).find(".label").attr("data-id"),d=$(b).find(".score").text();d=d.replace(i,""),0/0==parseInt(d)&&(d=3),f.scoreMap[c]=d}),m(f.scoreMap)&&a.push(f)}),a},{init:n}});